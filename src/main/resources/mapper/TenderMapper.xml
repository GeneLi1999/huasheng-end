<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.myproject.api.springboot_mybatis.dao.TenderDao">
<!--    <resultMap id="BaseResultMap" type="com.myproject.api.springboot_mybatis.entity.Tender">
        &lt;!&ndash;
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Dec 19 15:54:42 CST 2018.
        &ndash;&gt;
        <id column="staff_id" jdbcType="INTEGER" property="staff_id" />
        <result column="staff_account" jdbcType="VARCHAR" property="staff_account" />
        <result column="staff_password" jdbcType="VARCHAR" property="staff_password" />
    </resultMap>-->

    <!--    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">-->
    <!--        &lt;!&ndash;-->
    <!--          WARNING - @mbg.generated-->
    <!--          This element is automatically generated by MyBatis Generator, do not modify.-->
    <!--          This element was generated on Wed Dec 19 15:54:42 CST 2018.-->
    <!--        &ndash;&gt;-->
    <!--        select-->
    <!--        <include refid="Base_Column_List" />-->
    <!--        from staff-->
    <!--        where id = #{id,jdbcType=INTEGER}-->
    <!--    </select>-->

    <select id="getAllTender" resultType="com.myproject.api.springboot_mybatis.entity.Tender" >
        select  * from tender
    </select>

    <insert id="insert" parameterType="com.myproject.api.springboot_mybatis.entity.Tender" useGeneratedKeys="true" keyProperty="id">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into tender (id, tender_year, tender_date,
        project_name, audit_type, tender_block,
        tender_block_sum, tender_offer, tender_flag,
        tender_unit, tender_share, tender_ceiling,
        tender_discount, tender_job_type, tender_type,
        tender_specific_type, province, city,
        tender_agency, tender_way, tender_responsibility,
        department, tender_contact, tender_contact_phone,
        tender_agency_contact, tender_agency_contact_phone,
        tender_text, tender_record_scanning, project_record,
        tender_margin, tender_account, bank_deposit,
        if_submit, if_delete, jing_ban_ren,
        shen_he_ren, if_issue)
        values (#{id,jdbcType=INTEGER}, #{tender_year,jdbcType=VARCHAR}, #{tender_date,jdbcType=TIMESTAMP},
        #{project_name,jdbcType=VARCHAR}, #{audit_type,jdbcType=VARCHAR}, #{tender_block,jdbcType=VARCHAR},
        #{tender_block_sum,jdbcType=DOUBLE}, #{tender_offer,jdbcType=VARCHAR}, #{tender_flag,jdbcType=VARCHAR},
        #{tender_unit,jdbcType=VARCHAR}, #{tender_share,jdbcType=DOUBLE}, #{tender_ceiling,jdbcType=VARCHAR},
        #{tender_discount,jdbcType=DOUBLE}, #{tender_job_type,jdbcType=VARCHAR}, #{tender_type,jdbcType=VARCHAR},
        #{tender_specific_type,jdbcType=VARCHAR}, #{province,jdbcType=VARCHAR}, #{city,jdbcType=VARCHAR},
        #{tender_agency,jdbcType=VARCHAR}, #{tender_way,jdbcType=VARCHAR}, #{tender_responsibility,jdbcType=VARCHAR},
        #{department,jdbcType=VARCHAR}, #{tender_contact,jdbcType=VARCHAR}, #{tender_contact_phone,jdbcType=VARCHAR},
        #{tender_agency_contact,jdbcType=VARCHAR}, #{tender_agency_contact_phone,jdbcType=VARCHAR},
        #{tender_text,jdbcType=VARCHAR}, #{tender_record_scanning,jdbcType=VARCHAR}, #{project_record,jdbcType=VARCHAR},
        #{tender_margin,jdbcType=DOUBLE}, #{tender_account,jdbcType=VARCHAR}, #{bank_deposit,jdbcType=VARCHAR},
        #{if_submit,jdbcType=CHAR}, #{if_delete,jdbcType=CHAR}, #{jing_ban_ren,jdbcType=INTEGER},
        #{shen_he_ren,jdbcType=INTEGER}, #{if_issue,jdbcType=CHAR})
    </insert>

    <delete id="delete"  parameterType="com.myproject.api.springboot_mybatis.entity.Tender">
    delete from tender where id=#{id}
    </delete>

    <update id="updateByPrimaryKey" parameterType="com.myproject.api.springboot_mybatis.entity.Tender">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update tender
        set tender_year = #{tender_year,jdbcType=VARCHAR},
        tender_date = #{tender_date,jdbcType=TIMESTAMP},
        project_name = #{project_name,jdbcType=VARCHAR},
        audit_type = #{audit_type,jdbcType=VARCHAR},
        tender_block = #{tender_block,jdbcType=VARCHAR},
        tender_block_sum = #{tender_block_sum,jdbcType=DOUBLE},
        tender_offer = #{tender_offer,jdbcType=VARCHAR},
        tender_flag = #{tender_flag,jdbcType=VARCHAR},
        tender_unit = #{tender_unit,jdbcType=VARCHAR},
        tender_share = #{tender_share,jdbcType=DOUBLE},
        tender_ceiling = #{tender_ceiling,jdbcType=VARCHAR},
        tender_discount = #{tender_discount,jdbcType=DOUBLE},
        tender_job_type = #{tender_job_type,jdbcType=VARCHAR},
        tender_type = #{tender_type,jdbcType=VARCHAR},
        tender_specific_type = #{tender_specific_type,jdbcType=VARCHAR},
        province = #{province,jdbcType=VARCHAR},
        city = #{city,jdbcType=VARCHAR},
        tender_agency = #{tender_agency,jdbcType=VARCHAR},
        tender_way = #{tender_way,jdbcType=VARCHAR},
        tender_responsibility = #{tender_responsibility,jdbcType=VARCHAR},
        department = #{department,jdbcType=VARCHAR},
        tender_contact = #{tender_contact,jdbcType=VARCHAR},
        tender_contact_phone = #{tender_contact_phone,jdbcType=VARCHAR},
        tender_agency_contact = #{tender_agency_contact,jdbcType=VARCHAR},
        tender_agency_contact_phone = #{tender_agency_contact_phone,jdbcType=VARCHAR},
        tender_text = #{tender_text,jdbcType=VARCHAR},
        tender_record_scanning = #{tender_record_scanning,jdbcType=VARCHAR},
        project_record = #{project_record,jdbcType=VARCHAR},
        tender_margin = #{tender_margin,jdbcType=DOUBLE},
        tender_account = #{tender_account,jdbcType=VARCHAR},
        bank_deposit = #{bank_deposit,jdbcType=VARCHAR},
        if_submit = #{if_submit,jdbcType=CHAR},
        if_delete = #{if_delete,jdbcType=CHAR},
        jing_ban_ren = #{jing_ban_ren,jdbcType=INTEGER},
        shen_he_ren = #{shen_he_ren,jdbcType=INTEGER},
        if_issued = #{if_issue,jdbcType=CHAR}
        where id = #{id,jdbcType=INTEGER}
    </update>

    <update id="submitTender">
        update tender set if_submit=1,if_issued=0 where id=#{id,jdbcType=INTEGER}
    </update>

    <select id="getCheckerTender" resultType="com.myproject.api.springboot_mybatis.entity.Tender">
        select * from tender where if_submit=1
    </select>

    <update id="checkpassTender">
        update tender set if_issued=1,shen_he_ren=#{shen_he_ren} where id=#{id}
    </update>
    <update id="checknotpassTender">
        update tender set if_issued=0,shen_he_ren=#{shen_he_ren} where id=#{id}
    </update>

    <select id="getname" resultType="com.myproject.api.springboot_mybatis.entity.Staff" >
        SELECT * FROM staff  ;
    </select>

    <select id="getCheckTender" resultType="com.myproject.api.springboot_mybatis.entity.Tender" >

        SELECT * FROM tender where if_submit=1 and (shen_he_ren=#{shen_he_ren} or shen_he_ren=0) ;

    </select>

    <update id="pass" parameterType="com.mytender.api.springboot_mybatis.entity.Tender">
        update tender  set
                           if_issued=2,
                           shen_he_ren=#{shen_he_ren}
        where tender.tender_id=#{tender_id} and if_issued=0
    </update>

    <update id="refuse" parameterType="com.myproject.api.springboot_mybatis.entity.Tender">
        update tender  set
                            if_issued=1,
                            shen_he_ren=#{shen_he_ren}
        where id = #{id} and if_issued=0
    </update>

    <update id="if_delete" parameterType="com.myproject.api.springboot_mybatis.entity.Tender">
        update tender
        set tender_year = #{tender_year,jdbcType=VARCHAR},
            tender_date = #{tender_date,jdbcType=TIMESTAMP},
            project_name = #{project_name,jdbcType=VARCHAR},
            audit_type = #{audit_type,jdbcType=VARCHAR},
            tender_block = #{tender_block,jdbcType=VARCHAR},
            tender_block_sum = #{tender_block_sum,jdbcType=DOUBLE},
            tender_offer = #{tender_offer,jdbcType=VARCHAR},
            tender_flag = #{tender_flag,jdbcType=VARCHAR},
            tender_unit = #{tender_unit,jdbcType=VARCHAR},
            tender_share = #{tender_share,jdbcType=DOUBLE},
            tender_ceiling = #{tender_ceiling,jdbcType=VARCHAR},
            tender_discount = #{tender_discount,jdbcType=DOUBLE},
            tender_job_type = #{tender_job_type,jdbcType=VARCHAR},
            tender_type = #{tender_type,jdbcType=VARCHAR},
            tender_specific_type = #{tender_specific_type,jdbcType=VARCHAR},
            province = #{province,jdbcType=VARCHAR},
            city = #{city,jdbcType=VARCHAR},
            tender_agency = #{tender_agency,jdbcType=VARCHAR},
            tender_way = #{tender_way,jdbcType=VARCHAR},
            tender_responsibility = #{tender_responsibility,jdbcType=VARCHAR},
            department = #{department,jdbcType=VARCHAR},
            tender_contact = #{tender_contact,jdbcType=VARCHAR},
            tender_contact_phone = #{tender_contact_phone,jdbcType=VARCHAR},
            tender_agency_contact = #{tender_agency_contact,jdbcType=VARCHAR},
            tender_agency_contact_phone = #{tender_agency_contact_phone,jdbcType=VARCHAR},
            tender_text = #{tender_text,jdbcType=VARCHAR},
            tender_record_scanning = #{tender_record_scanning,jdbcType=VARCHAR},
            project_record = #{project_record,jdbcType=VARCHAR},
            tender_margin = #{tender_margin,jdbcType=DOUBLE},
            tender_account = #{tender_account,jdbcType=VARCHAR},
            bank_deposit = #{bank_deposit,jdbcType=VARCHAR},
            if_delete = 1,
            jing_ban_ren = #{jing_ban_ren,jdbcType=INTEGER},
            shen_he_ren = #{shen_he_ren,jdbcType=INTEGER},
        where id = #{id,jdbcType=INTEGER}
    </update>

</mapper>